# s21_string+

Реализация библиотеки string.h с дополнениями.


## Contents
0. [Preamble](#preamble)
1. [Chapter I](#chapter-i) \
    1.1. [Introduction](#introduction)
2. [Chapter II](#chapter-ii) \
    2.1. [Information](#information)
3. [Chapter III](#chapter-iii) \
    3.1. [## Part 1](### Part-1-реализация-функции-библиотеки-stringh)  
    3.2. [## Part 2](### Part-2-частичная-реализация-функции-sprintf)  
    3.3. [## Part 3](### Part-3-дополнительно-реализация-некоторых-модификаторов-формата-функции-sprintf)  
    3.4. [## Part 4](### Part-4-дополнительно-реализация-функции-sscanf)  
    3.5. [## Part 5](### Part-5-дополнительно-реализация-специальных-функций-обработки-строк)  


## Preamble

![s21_string+](misc/rus/images/s21_stringplus.png)

## Introduction

Мы (hoodiesn, gertruer, letishal, melaniac, `perlabru`) разработали собственную реализацию библиотеки string.h на языке программирования Си, включая функции sprintf и sscanf. Библиотека string.h является основной библиотекой языка Си для работы со строковыми данными. В ходе проекта мы решали задачи по обработке строк и закрепляли структурный подход.

## Information

### string.h Типы

| № | Переменная | Описание |
| ------ | ------ | ------ |
| 1 | size_t | Целочисленный тип без знака, являющийся результатом ключевого слова sizeof.
	
### string.h Макросы

| № | Макрос | Описание |
| ------ | ------ | ------ |
| 1 | NULL | Макрос, являющийся значением константы нулевого указателя.

### string.h Функции

| № | Функция | Описание |
| ------ | ------ | ------ |
| 1 | void *memchr(const void *str, int c, size_t n) | Выполняет поиск первого вхождения символа c (беззнаковый тип) в первых n байтах строки, на которую указывает аргумент str. |
| 2 | int memcmp(const void *str1, const void *str2, size_t n) | Сравнивает первые n байтов str1 и str2. |
| 3 | void *memcpy(void *dest, const void *src, size_t n) | Копирует n символов из src в dest. |
| 4 | void *memset(void *str, int c, size_t n) | Копирует символ c (беззнаковый тип) в первые n символов строки, на которую указывает аргумент str. |
| 5 | char *strncat(char *dest, const char *src, size_t n) | Добавляет строку, на которую указывает src, в конец строки, на которую указывает dest, длиной до n символов. |
| 6	| char *strchr(const char *str, int c) | Выполняет поиск первого вхождения символа c (беззнаковый тип) в строке, на которую указывает аргумент str. |
| 7 | int strncmp(const char *str1, const char *str2, size_t n) | Сравнивает не более первых n байтов str1 и str2. |
| 8 | char *strncpy(char *dest, const char *src, size_t n) | Копирует до n символов из строки, на которую указывает src, в dest. |
| 9 | size_t strcspn(const char *str1, const char *str2) | Вычисляет длину начального сегмента str1, который полностью состоит из символов, не входящих в str2. |
| 10 | char *strerror(int errnum) | Выполняет поиск во внутреннем массиве номера ошибки errnum и возвращает указатель на строку с сообщением об ошибке. Нужно объявить макросы, содержащие массивы сообщений об ошибке для операционных систем mac и linux. Описания ошибок есть в оригинальной библиотеке. Проверка текущей ОС осуществляется с помощью директив.|
| 11 | size_t strlen(const char *str) | Вычисляет длину строки str, не включая завершающий нулевой символ. |
| 12 | char *strpbrk(const char *str1, const char *str2) | Находит первый символ в строке str1, который соответствует любому символу, указанному в str2. |
| 13 | char *strrchr(const char *str, int c) | Выполняет поиск последнего вхождения символа c (беззнаковый тип) в строке, на которую указывает аргумент str. |
| 14 | char *strstr(const char *haystack, const char *needle) | Находит первое вхождение всей строки needle (не включая завершающий нулевой символ), которая появляется в строке haystack. |
| 15 | char *strtok(char *str, const char *delim) | Разбивает строку str на ряд токенов, разделенных delim. |

### sprintf and sscanf

- int sscanf(const char *str, const char *format, ...) - считывает форматированный ввод из строки.
- int sprintf(char *str, const char *format, ...) - отправляет форматированный вывод в строку, на которую указывает str.

где:
- str − Это С-строка, которую функция обрабатывает в качестве источника для извлечения данных;
- format −  это С-строка, содержащая один или несколько следующих элементов: пробельный символ, непробельный символ и спецификаторы формата. Спецификатор формата для печатающих функций следует прототипу: %[флаги][ширина][.точность][длина]спецификатор. Спецификатор формата для сканирующих функций следует прототипу: %[*][ширина][длина]спецификатор.

### sprintf and sscanf Спецификаторы

| № | Спецификатор | Результат sprintf | Результат sscanf |
| --- | --- | --- | --- |
| 1 | c | Символ | Символ |
| 2 | d | Знаковое десятичное целое число | Знаковое десятичное целое число |
| 3 | i | Знаковое десятичное целое число | Знаковое целое число (может быть десятичным, восьмеричным или шестнадцатеричным) |
| 4 | e | Научная нотация (мантисса/экспонента) с использованием символа e (вывод чисел должен совпадать с точностью до e-6) | Десятичное число с плавающей точкой или научная нотация (мантисса/экспонента) |
| 5 | E | Научная нотация (мантисса/экспонента) с использованием символа Е | Десятичное число с плавающей точкой или научная нотация (мантисса/экспонента) |
| 6 | f | Десятичное число с плавающей точкой | Десятичное число с плавающей точкой или научная нотация (мантисса/экспонента) |
| 7 | g | Использует кратчайший из представлений десятичного числа | Десятичное число с плавающей точкой или научная нотация (мантисса/экспонента) |
| 8 | G | Использует кратчайший из представлений десятичного числа | Десятичное число с плавающей точкой или научная нотация (мантисса/экспонента) |
| 9 | o | Беззнаковое восьмеричное число | Беззнаковое восьмеричное число |
| 10 | s | Строка символов | Строка символов |
| 11 | u | Беззнаковое десятичное целое число | Беззнаковое десятичное целое число |
| 12 | x | Беззнаковое шестнадцатеричное целое число | Беззнаковое шестнадцатеричное целое число (любые буквы) |
| 13 | X | Беззнаковое шестнадцатеричное целое число (заглавные буквы) | Беззнаковое шестнадцатеричное целое число (любые буквы) |
| 14 | p | Адрес указателя | Адрес указателя |
| 15 | n | Количество символов, напечатанных до появления %n | Количество символов, считанных до появления %n |
| 16 | % | Символ % | Символ % |

### sprintf Флаги

| № | Флаг | Описание |
| --- | --- | --- |
| 1 | - | Выравнивание по левому краю в пределах заданной ширины поля. Выравнивание по правому краю используется по умолчанию (см. подспецификатор ширины). |
| 2 | + | Заставляет явно указывать знак плюс или минус (+ или -) даже для положительных чисел. По умолчанию только отрицательным числам предшествует знак "-". |
| 3 | (пробел) | Если знак не будет выведен, перед значением вставляется пробел. |
| 4 | # | При использовании со спецификаторами o, x или X перед числом вставляется 0, 0x или 0X соответственно (для значений, отличных от нуля). При использовании с e, E и f "заставляет" записанный вывод содержать десятичную точку, даже если за ней не последует никаких цифр. По умолчанию, если не следует никаких цифр, десятичная точка не записывается. При использовании с g или G результат такой же, как и с e или E, но конечные нули не удаляются. |
| 5 | 0 | Заполняет число слева нулями (0) вместо пробелов, где указан спецификатор ширины (см. подспецификатор ширины). |

### sprintf and sscanf Ширина

| № | Ширина | Описание |
| --- | --- | --- |
| 1	| (число) | Минимальное количество печатаемых символов. Если выводимое значение короче этого числа, результат дополняется пробелами. Значение не усекается, даже если результат больше. |
| 2 | * | В sprintf знак * значит, что ширина указывается не в строке формата, а в качестве дополнительного аргумента целочисленного значения, предшествующего аргументу, который необходимо отформатировать. В sscanf знак *, помещенный после % и перед спецификатором формата, считывает данные указанного типа, но подавляет их присваивание. |

### sprintf Точность

| № | .точность | Описание |
| --- | --- | --- |
| 1	| .число | Для целочисленных спецификаторов (d, i, o, u, x, X) − точность определяет минимальное количество записываемых цифр. Если записываемое значение короче этого числа, результат дополняется ведущими нулями. Значение не усекается, даже если результат длиннее. Точность 0 означает, что для значения 0 не записывается ни одного символа. Для спецификаторов e, E и f − это количество цифр, которые должны быть напечатаны после десятичной точки. Для спецификаторов g и G − это максимальное количество значащих цифр, которые должны быть напечатаны. Для s − это максимальное количество печатаемых символов. По умолчанию все символы печатаются до тех пор, пока не встретится терминирующий нуль. Для типа с − никак не влияет. Если точность не указана для спецификаторов e, E, f, g и G, то по умолчанию ее значение равно 6. Если точность не указана для остальных спецификаторов, то по умолчанию ее значение равно 1. Если число не указано (нет явного значения точности), то по умолчанию - 0. |
| 2	| .* | Точность указывается не в строке формата, а в качестве дополнительного аргумента целочисленного значения, предшествующего аргументу, который должен быть отформатирован. |

### sprintf and sscanf Длина

| № | Длина | Описание |
| --- | --- | --- |
| 1 | h | Аргумент интерпретируется как короткое int или короткое int без знака (применяется только к целочисленным спецификаторам: i, d, o, u, x и X). |
| 2 | l | Аргумент интерпретируется как длинное int или длинное int без знака для целочисленных спецификаторов (i, d, o, u, x и X) и как широкий символ или строка широких символов для спецификаторов c и s. |
| 3 | L | Аргумент интерпретируется как длинный double (применяется только к спецификаторам с плавающей точкой − e, E, f, g и G). |

### Специальные функции обработки строк (вдохновленные классом String в языке C#)

| № | Функция | Описание |
| ------ | ------ | ------ |
| 1 | void *to_upper(const char *str) | Возвращает копию строки (str), преобразованной в верхний регистр. В случае какой-либо ошибки следует вернуть значение NULL |
| 2 | void *to_lower(const char *str) | Возвращает копию строки (str), преобразованной в нижний регистр. В случае какой-либо ошибки следует вернуть значение NULL |
| 3 | void *insert(const char *src, const char *str, size_t start_index) | Возвращает новую строку, в которой указанная строка (str) вставлена в указанную позицию (start_index) в данной строке (src). В случае какой-либо ошибки следует вернуть значение NULL |
| 4 | void *trim(const char *src, const char *trim_chars) | Возвращает новую строку, в которой удаляются все начальные и конечные вхождения набора заданных символов (trim_chars) из данной строки (src). В случае какой-либо ошибки следует вернуть значение NULL |


## Chapter III

## Part 1. Реализация функций библиотеки string.h
В данной части задания были реализованы следующие функции из библиотеки string.h:

- s21_strlen: вычисляет длину строки.
- s21_strcpy: копирует строку.
- s21_strncpy: копирует указанное количество символов из одной строки в другую.
- s21_strcat: объединяет две строки.
- s21_strncat: объединяет указанное количество символов из одной строки с другой.
- s21_strcmp: сравнивает две строки.
- s21_strncmp: сравнивает указанное количество символов двух строк.
- s21_strchr: находит первое вхождение символа в строке.
- s21_strrchr: находит последнее вхождение символа в строке.
- s21_strstr: находит первое вхождение подстроки в строке.
- s21_strtok: разбивает строку на токены с использованием указанных разделителей.
- Каждая функция была реализована на языке C, с использованием компилятора gcc и в соответствии со стандартом C11.

## Part 2. Частичная реализация функции sprintf
В данной части задания была реализована функция s21_sprintf из библиотеки stdio.h. Функция s21_sprintf позволяет форматировать строки с использованием спецификаторов, флагов, ширины, точности и длины.

Были поддержаны следующие спецификаторы: c, d, f, s, u, %. Также были поддержаны флаги: -, +, пробел. Ширина и точность могут быть указаны как числа. Длина поддерживает модификаторы h и l.

Функция s21_sprintf была размещена в библиотеке s21_string.h и реализована в соответствии с требованиями первой части задания. Она работает с z-строками из однобайтовых символов в кодировке ASCII.

## Part 3. Дополнительно. Реализация некоторых модификаторов формата функции sprintf
В данной части задания были реализованы некоторые дополнительные модификаторы формата для функции s21_sprintf из библиотеки stdio.h. Были поддержаны следующие модификаторы: g, G, e, E, x, X, o, p. Также были поддержаны флаги # и 0, а также ширина и точность с использованием символа *.

Реализация модификаторов формата была выполнена в соответствии с требованиями первой части задания и была размещена в библиотеке s21_string.h.

## Part 4. Дополнительно. Реализация функции sscanf
В данной части задания была реализована функция s21_sscanf из библиотеки stdio.h. Функция s21_sscanf позволяет анализировать строки и извлекать данные, используя форматирование, аналогичное функции sscanf.

Функция s21_sscanf была размещена в библиотеке s21_string.h и реализована с учетом всех требований, изложенных в первой части задания. Она поддерживает полное форматирование, включая флаги, ширину, точность, модификаторы и типы преобразования.

## Part 5. Дополнительно. Реализация специальных функций обработки строк
В данной части задания были реализованы некоторые функции обработки строк, вдохновленные классом String в языке C#. Эти функции предоставляют дополнительные возможности для работы со строками.

Были реализованы следующие функции:

- s21_to_upper: возвращает копию строки, преобразованной в верхний регистр.
- s21_to_lower: возвращает копию строки, преобразованной в нижний регистр.
- s21_insert: возвращает новую строку, в которой указанная строка вставлена в указанную позицию в переданной строке (src).
- s21_trim: возвращает новую строку, в которой удаляются все начальные и конечные вхождения набора заданных символов из переданной строки (src). 

## Results

Также был подготовлен набор unit-тестов с использованием библиотеки Check для проверки результатов работы функций. Unit-тесты покрывают не менее 80% каждой функции и проверяют результаты работы реализации библиотеки путём сравнения с реализацией стандартной библиотеки string.h.

Библиотека была оформлена как статическая библиотека с заголовочным файлом s21_string.h. Для сборки библиотеки и тестов предусмотрен Makefile с целями all, clean, test, s21_string.a, gcov_report. Цель gcov_report формирует отчёт gcov в виде HTML страницы.

>`В случае какой-либо ошибки функции возвращают S21_NULL.`